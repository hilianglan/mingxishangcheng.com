(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-home-storedetail-Storemap"],{"04f5":function(t,e,n){var a=n("1ca6");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=n("4f06").default;o("481ca492",a,!0,{sourceMap:!1,shadowMode:!1})},"11f5":function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return a}));var a={pageMeta:n("6d42").default,uniNavBar:n("904a").default},o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("page-meta",{attrs:{"root-font-size":t.fontSize+"px"}}),n("home-base",{attrs:{show:!1}},[n("v-uni-view",{staticClass:"div"},[n("v-uni-view",{staticClass:"div common-header-wrap"},[n("v-uni-view",{style:"height:"+t.navHeight+"px"}),n("v-uni-view",{staticClass:"common-header-holder"}),n("v-uni-view",{staticClass:"common-header-fixed"},[n("title-header"),n("uni-nav-bar",{staticClass:"common-header",attrs:{title:"店铺地图","left-icon":"back"},on:{clickLeft:function(e){arguments[0]=e=t.$handleEvent(e),t.goBack()}}})],1)],1),!t.store||t.store.store_latitude&&t.store.store_longitude?t._e():n("v-uni-view",{staticClass:"div common-no-more"},[t._v("店铺未设置地址")]),t.getUrl||t.iframeUrl?n("iframe",{staticClass:"map-content",attrs:{src:t.iframeUrl}}):t._e()],1)],1)],1)},i=[]},"1ca6":function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.map-content[data-v-8672a9ae]{position:absolute;padding-top:2rem;width:100%;height:100%;top:0;box-sizing:border-box;border:0}',""]),t.exports=e},"485b":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"div home-base"},[a("v-uni-view",{staticClass:"status-holder"}),a("v-uni-view",{staticClass:"content"},[t._t("default")],2),t.show?a("v-uni-view",{staticClass:"div common-footer-wrap"},[a("v-uni-view",{staticClass:"common-footer"},[a("v-uni-view",{staticClass:"item-wrap",class:{active:"pages/home/index/Index"==t.page.route}},[a("v-uni-navigator",{staticClass:"item",attrs:{url:"/pages/home/index/Index","open-type":"reLaunch"}},["pages/home/index/Index"==t.page.route?a("v-uni-image",{staticClass:"img image",attrs:{mode:"aspectFit",src:n("4336")}}):a("v-uni-image",{staticClass:"img image",attrs:{mode:"aspectFit",src:n("25eb")}}),a("v-uni-text",{staticClass:"span text"},[t._v("首页")])],1)],1),a("v-uni-view",{staticClass:"item-wrap",class:{active:"pages/home/goodsclass/Goodsclass"==t.page.route}},[a("v-uni-navigator",{staticClass:"item",attrs:{url:"/pages/home/goodsclass/Goodsclass"}},["pages/home/goodsclass/Goodsclass"==t.page.route?a("v-uni-image",{staticClass:"img image",attrs:{mode:"aspectFit",src:n("9778")}}):a("v-uni-image",{staticClass:"img image",attrs:{mode:"aspectFit",src:n("f2d3")}}),a("v-uni-text",{staticClass:"span text"},[t._v("分类")])],1)],1),a("v-uni-view",{staticClass:"item-wrap",class:{active:"pages/home/search/Search"==t.page.route}},[a("v-uni-navigator",{staticClass:"item",attrs:{url:"/pages/home/search/Search"}},["pages/home/search/Search"==t.page.route?a("v-uni-image",{staticClass:"img image",attrs:{mode:"aspectFit",src:n("ecc2")}}):a("v-uni-image",{staticClass:"img image",attrs:{mode:"aspectFit",src:n("5751")}}),a("v-uni-text",{staticClass:"span text"},[t._v("搜索")])],1)],1),a("v-uni-view",{staticClass:"item-wrap",class:{active:"pages/member/cart/Cart"==t.page.route}},[a("v-uni-navigator",{staticClass:"item",attrs:{url:"/pages/member/cart/Cart"}},["pages/member/cart/Cart"==t.page.route?a("v-uni-image",{staticClass:"img image",attrs:{mode:"aspectFit",src:n("6ae5")}}):a("v-uni-image",{staticClass:"img image",attrs:{mode:"aspectFit",src:n("08a6")}}),a("v-uni-text",{staticClass:"span text"},[t._v("购物车")]),t.cartNumber>0?a("v-uni-text",{staticClass:"span icon"},[t._v(t._s(t.getCarCount))]):t._e()],1)],1),a("v-uni-view",{staticClass:"item-wrap",class:{active:"pages/member/index/Index"==t.page.route}},[a("v-uni-navigator",{staticClass:"item",attrs:{url:"/pages/member/index/Index","open-type":"reLaunch"}},["pages/member/index/Index"==t.page.route?a("v-uni-image",{staticClass:"img image",attrs:{mode:"aspectFit",src:n("aa43")}}):a("v-uni-image",{staticClass:"img image",attrs:{mode:"aspectFit",src:n("c1c3")}}),a("v-uni-text",{staticClass:"span text"},[t._v("我的")])],1)],1)],1)],1):t._e()],1)},o=[]},"4e81":function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.status-holder[data-v-cb006efa]{background-color:#fff}.home-base[data-v-cb006efa]{display:flex;flex-direction:column}.content[data-v-cb006efa]{flex:1}.item-wrap[data-v-cb006efa]{position:relative}.image[data-v-cb006efa]{width:1rem;height:1rem;display:block;margin-left:auto;margin-right:auto;margin-top:.2rem;margin-bottom:.2rem}.icon[data-v-cb006efa]{position:absolute;right:.8rem;top:.2rem;font-size:.5rem;line-height:.7rem;width:.9rem;height:.7rem;background:#ef3338;border-radius:1rem;text-align:center;color:#fff}',""]),t.exports=e},"68ab":function(t,e,n){"use strict";n("7a82");var a=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n("2eff"),i=a(n("9704")),r=a(n("fc96")),s=(n("26cb"),n("ff51")),c=n("efd7"),u={mounted:function(){},data:function(){return{navHeight:0,iframeUrl:"",store:!1,store_id:"",o_lat:!1,o_lng:!1,d_lat:!1,d_lng:!1}},components:{TitleHeader:i.default,HomeBase:r.default},onLoad:function(t){var e=this;this.store_id=t.id?t.id:"",(0,c.getStoreInfo)(this.store_id).then((function(t){e.store=t.result.store_info,e.store.store_longitude&&e.store.store_latitude&&(0,s.convertPoint)(e.store.store_longitude,e.store.store_latitude).then((function(t){0==t.status?(e.d_lat=t.result[0].y,e.d_lng=t.result[0].x):uni.showToast({icon:"none",title:"坐标转换失败"})})).catch((function(t){console.log(t),uni.showToast({icon:"none",title:"调用坐标转换接口失败"})}))})).catch((function(t){uni.showToast({icon:"none",title:t.message})}));var n=this;(0,s.getPosition)((function(t){1e4===t.code?(n.o_lat=t.result.lat,n.o_lng=t.result.lng):uni.showToast({icon:"none",title:t.message})}),!0)},computed:{fontSize:function(){return(0,o.getFontSize)()},getUrl:function(){var t=this;this.d_lat&&this.d_lng&&this.o_lat&&this.o_lng&&(0,c.getStoreMap)({region:this.store.area_info,o_lng:this.o_lng,o_lat:this.o_lat,o_name:"我",d_lng:this.d_lng,d_lat:this.d_lat,d_name:this.store.store_name}).then((function(e){t.iframeUrl=e.result.url,console.log(t.iframeUrl)})).catch((function(t){uni.showToast({icon:"none",title:t.message})}))}},methods:{goBack:function(){uni.navigateBack({delta:1})}}};e.default=u},"73fc":function(t,e,n){"use strict";n.r(e);var a=n("68ab"),o=n.n(a);for(var i in a)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(i);e["default"]=o.a},9938:function(t,e,n){"use strict";var a=n("b51f"),o=n.n(a);o.a},"999b":function(t,e,n){"use strict";n("7a82");var a=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(n("5530")),i=n("26cb"),r=n("bae8"),s={name:"HomeBase",data:function(){return{page:"",cartNumber:0}},props:{show:{type:Boolean,default:!0}},computed:(0,o.default)((0,o.default)({},(0,i.mapState)({isOnline:function(t){return t.member.isOnline}})),{},{getCarCount:function(){return this.cartNumber>0&&this.cartNumber<100?this.cartNumber:this.cartNumber>=100?"99+":void 0}}),mounted:function(){var t=getCurrentPages(),e=t[t.length-1];this.page={route:e.route,options:e.options},this.page.options&&this.page.options.inviter_id&&this.memberInviterId({inviterId:this.page.options.inviter_id}),this.getCartCount()},methods:(0,o.default)((0,o.default)({},(0,i.mapMutations)({memberInviterId:"memberInviterId"})),{},{getCartCount:function(){var t=this;this.isOnline&&(0,r.cartQuantity)().then((function(e){e&&(t.cartNumber=e.result.cart_count)}))}})};e.default=s},"9ab0":function(t,e,n){"use strict";var a=n("04f5"),o=n.n(a);o.a},b51f:function(t,e,n){var a=n("4e81");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=n("4f06").default;o("25fe4561",a,!0,{sourceMap:!1,shadowMode:!1})},ba6b:function(t,e,n){"use strict";n.r(e);var a=n("11f5"),o=n("73fc");for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);n("9ab0");var r=n("f0c5"),s=Object(r["a"])(o["default"],a["b"],a["c"],!1,null,"8672a9ae",null,!1,a["a"],void 0);e["default"]=s.exports},d3a8:function(t,e,n){"use strict";n.r(e);var a=n("999b"),o=n.n(a);for(var i in a)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(i);e["default"]=o.a},efd7:function(t,e,n){"use strict";n("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.receiveVoucher=e.getStoreVoucher=e.getStoreMap=e.getStoreInfo=e.getStoreGoodsList=e.getStoreGoodsClass=void 0;var a=n("9fa5");e.getStoreVoucher=function(t){return(0,a.requestApi)("/Voucher/voucher_tpl_list","POST",{store_id:t,gettype:"points"})};e.receiveVoucher=function(t){return(0,a.requestApi)("/Membervoucher/voucher_point","POST",{tid:t},"member")};e.getStoreInfo=function(t,e){return(0,a.requestApi)("/Store/store_info","POST",{store_id:t,key:e})};e.getStoreMap=function(t){return(0,a.requestApi)("/Store/get_store_map","POST",t)};e.getStoreGoodsClass=function(t){return(0,a.requestApi)("/Store/store_goods_class","POST",{store_id:t})};e.getStoreGoodsList=function(t){return(0,a.requestApi)("/Store/store_goods","POST",{page:t.page,per_page:t.per_page,storegc_id:t.gc_id,keyword:t.keyword,store_id:t.store_id,sort_order:t.sort_order,sort_key:t.sort_key})}},fc96:function(t,e,n){"use strict";n.r(e);var a=n("485b"),o=n("d3a8");for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);n("9938");var r=n("f0c5"),s=Object(r["a"])(o["default"],a["b"],a["c"],!1,null,"cb006efa",null,!1,a["a"],void 0);e["default"]=s.exports},ff51:function(t,e,n){"use strict";n("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.addMap=function(t,e,n,a,o){var i=new BMap.Map(t),r=new BMap.ZoomControl({anchor:BMAP_ANCHOR_BOTTOM_RIGHT,offset:new BMap.Size(20,20)});function s(){this.defaultAnchor=BMAP_ANCHOR_TOP_LEFT,this.defaultOffset=new BMap.Size(10,10)}i.addControl(r),s.prototype=new BMap.Control,s.prototype.initialize=function(t){var n=document.createElement("div");return n.className="bmap-pan-control pan-left iconfont icon-arrow-down",n.onclick=function(n){t.panBy(100,0),"function"===typeof e&&e()},t.getContainer().appendChild(n),n};var c=new s;function u(){this.defaultAnchor=BMAP_ANCHOR_TOP_RIGHT,this.defaultOffset=new BMap.Size(10,10)}i.addControl(c),u.prototype=new BMap.Control,u.prototype.initialize=function(t){var e=document.createElement("div");return e.className="bmap-pan-control pan-right iconfont icon-arrow-down",e.onclick=function(e){t.panBy(-100,0),"function"===typeof n&&n()},t.getContainer().appendChild(e),e};var l=new u;function d(){this.defaultAnchor=BMAP_ANCHOR_TOP_LEFT,this.defaultOffset=new BMap.Size(10,10)}i.addControl(l),d.prototype=new BMap.Control,d.prototype.initialize=function(t){var e=document.createElement("div");return e.className="bmap-pan-control pan-top iconfont icon-arrow-down",e.onclick=function(e){t.panBy(0,100),"function"===typeof a&&a()},t.getContainer().appendChild(e),e};var p=new d;function f(){this.defaultAnchor=BMAP_ANCHOR_BOTTOM_LEFT,this.defaultOffset=new BMap.Size(10,10)}i.addControl(p),f.prototype=new BMap.Control,f.prototype.initialize=function(t){var e=document.createElement("div");return e.className="bmap-pan-control pan-bottom iconfont icon-arrow-down",e.onclick=function(e){t.panBy(0,-100),"function"===typeof o&&o()},t.getContainer().appendChild(e),e};var m=new f;return i.addControl(m),i.disableDoubleClickZoom(),i.disableDragging(),i},e.addMarker=function(t,e){var n,a=t.lng,o=t.lat,i=t.text,r=t.color,s=new BMap.Point(a,o);return n=new BMap.Marker(s),n.initialize=function(t){var e=document.createElement("div");return e.style.position="absolute",e.style.width="45px",e.style.height="45px",e.style.lineHeight="45px",e.style.fontSize="40px",e.style.textAlign="center",e.style.color=r,e.className="iconfont icon-dingwei",e.innerHTML='<b style="font-size:18px;position:absolute;top:0;left:0px;color:#fff;line-height:1.8;width:100%">'+i+"</b>",t.getPanes().markerPane.appendChild(e),e},n.draw=function(){var t=this.getPosition(),n=e.pointToOverlayPixel(t);this.domElement.style.left=n.x-22.5+"px",this.domElement.style.top=n.y-45+"px"},e.addOverlay(n),n},e.addMarker2=function(t,e){var n,a,o=t.lng,i=t.lat,r=t.start_point,c=t.color,u=new BMap.Point(o,i);return n=new BMap.Marker(u),n.initialize=function(t){var e=document.createElement("div");e.style.position="absolute",e.style.width="20px",e.style.height="20px",e.style.lineHeight="20px",e.style.fontSize="20px",e.style.textAlign="center",e.style.color=c;var n=t.pointToOverlayPixel(u),o=t.pointToOverlayPixel(r),i=s(o,n);return r=u,a=i+13,e.style.transform="rotate("+a%360+"deg)",e.style.transformOrigin=n.x-10+"px "+n.y-7.1875+"px",e.className="iconfont icon-dingwei1",t.getPanes().markerPane.appendChild(e),e},n.draw=function(){var t=this.getPosition(),n=e.pointToOverlayPixel(t),o=e.pointToOverlayPixel(r),i=s(o,n);r=t,a=i+13,this.domElement.style.transform="rotate("+a%360+"deg)";var c=e.pointToOverlayPixel(t);this.domElement.style.left=c.x-10+"px",this.domElement.style.top=c.y-7.1875+"px"},e.addOverlay(n),n},e.calRotation=s,e.clearWatch=function(){if("undefined"===typeof a)return;o.clearWatch(a)},e.getPointNearby=e.getPointByIp=e.getPointByAddress=e.getAddressByPoint=e.getAddressByKeyword=e.convertPoint=void 0,e.getPosition=function(t,e){if(o){var n=e?"getCurrentPosition":"watchPosition",i=o[n]((function(e){(function(e,n){c(e,n).then((function(e){if(0==e.status){var n={code:1e4,message:"",result:{lng:e.result[0].x,lat:e.result[0].y}};t(n)}else{t({code:10001,message:"坐标转换失败",result:""})}})).catch((function(e){t({code:10001,message:"调用坐标转换接口失败",result:""})}))})(e.coords.longitude,e.coords.latitude)}),(function(e){var n="";switch(e.code){case e.PERMISSION_DENIED:n="定位请求拒绝";break;case e.POSITION_UNAVAILABLE:n="定位获取失败";break;case e.TIMEOUT:n="定位超时";break;default:n="未知错误";break}var a={code:10001,message:n,result:""};t(a)}),{enableHighAcuracy:!0,timeout:5e3,maximumAge:1e3});e||(a=i)}else{t({code:10001,message:"定位不支持",result:""})}};var a,o,i=n("9fa5"),r=n("2fac");function s(t,e){var n=t.x,a=t.y,o=e.x,i=e.y,r=Math.abs(n-o),s=Math.abs(a-i),c=Math.sqrt(Math.pow(r,2)+Math.pow(s,2)),u=s/c,l=Math.acos(u),d=Math.floor(180/(Math.PI/l));return o>n&&i>a&&(d=180-d),o===n&&i>a&&(d=180),o>n&&i===a&&(d=90),o<n&&i>a&&(d=180+d),o<n&&i===a&&(d=270),o<n&&i<a&&(d=360-d),d}o=navigator.geolocation;e.getAddressByPoint=function(t){return(0,i.requestRaw)(r.env.SITE_URL+"/bmap/reverse_geocoding/v3/","GET",{location:t,output:"json",ak:r.env.BMAP_AK,latest_admin:1})};e.getPointByAddress=function(t){return(0,i.requestRaw)(r.env.SITE_URL+"/bmap/geocoding/v3/","GET",{address:t,output:"json",ak:r.env.BMAP_AK,latest_admin:1})};e.getAddressByKeyword=function(t,e){return(0,i.requestRaw)(r.env.SITE_URL+"/bmap/place/v2/suggestion","GET",{query:t,region:e,city_limit:!0,output:"json",ak:r.env.BMAP_AK})};e.getPointByIp=function(){return(0,i.requestRaw)(r.env.SITE_URL+"/bmap/location/ip","GET",{coor:"bd09ll",ak:r.env.BMAP_AK})};e.getPointNearby=function(t){return(0,i.requestRaw)(r.env.SITE_URL+"/bmap/place/v2/search","GET",{query:"宾馆$酒店$住宅$餐饮$生活娱乐$公司$商务$学校$大厦$公寓$写字楼",output:"json",location:t,ak:r.env.BMAP_AK})};var c=function(t,e){return(0,i.requestRaw)(r.env.SITE_URL+"/bmap/geoconv/v1/","GET",{coords:t+","+e,output:"json",from:1,to:5,ak:r.env.BMAP_AK})};e.convertPoint=c}}]);