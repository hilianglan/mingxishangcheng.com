(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-member-refund-RefundForm"],{"0e99":function(e,t,n){"use strict";n("7a82");var i=n("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("14d9");var r=n("9c03"),a=i(n("c657")),o=i(n("19543")),u=i(n("0dfd")),d=n("7744"),s=i(n("d868")),f={components:{TitleHeader:a.default,MemberBase:o.default,flexLine:s.default,tuiPictureCropper:u.default},name:"MemberRefundForm",data:function(){return{navHeight:0,screenWidth:0,screenHeight:0,cropperOption:{img:"",canMove:!1,autoCrop:!0,autoCropWidth:100,autoCropHeight:100,maxImgSize:500,outputType:"png"},cropType:"",order_id:0,image:[],buyer_message:"",file_value:{}}},mounted:function(){var e=uni.getSystemInfoSync();this.screenWidth=e.windowWidth,this.screenHeight=e.windowHeight},computed:{fontSize:function(){return(0,r.getFontSize)()}},onLoad:function(e){this.order_id=e.order_id},methods:{showPopup:function(e){this.$refs[e].open()},hidePopup:function(e){this.$refs[e].close()},goBack:function(){uni.navigateBack({delta:1})},submitInformation:function(){var e=[];for(var t in this.file_value)e.push(this.file_value[t]);(0,d.addRefundAll)(this.order_id,this.buyer_message,e).then((function(e){uni.showToast({icon:"none",title:e.message}),uni.navigateTo({url:"/pages/member/refund/RefundList"})})).catch((function(e){uni.showToast({icon:"none",title:e.message})}))},useCrop:function(e){var t=this,n=this.cropType,i={filePath:e.url,name:"refund_pic"};(0,d.uploadRefundImage)(i).then((function(e){t.file_value[n]=e.result.file_name,t.image[n]=[{name:n,extname:"jpg",url:e.result.pic}],t.cropperOption.imgUrl="",t.$forceUpdate(),uni.hideLoading()})).catch((function(e){uni.showToast({icon:"none",title:e.message}),uni.hideLoading(),this.cropperOption.imgUrl="",this.$forceUpdate()}))},deleteRefundImage:function(e){var t=e.tempFile,n=t.uuid;delete this.file_value[n]},cropReady:function(){this.cropperOption.img=this.cropperOption.imgUrl},cropBack:function(){this.cropperOption.imgUrl="",this.$forceUpdate()},uploadRefundImage:function(e){var t=e.tempFiles[0];this.cropType=t.uuid,this.cropperOption.imgUrl=t.path,this.cropperOption.autoCropWidth=uni.getSystemInfoSync().windowWidth,this.cropperOption.autoCropHeight=uni.getSystemInfoSync().windowWidth,this.cropperOption.maxImgSize=uni.getSystemInfoSync().windowHeight-40,this.$forceUpdate()}}};t.default=f},2909:function(e,t,n){"use strict";n("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e)||(0,r.default)(e)||(0,a.default)(e)||(0,o.default)()};var i=u(n("6005")),r=u(n("db90")),a=u(n("06c5")),o=u(n("3427"));function u(e){return e&&e.__esModule?e:{default:e}}},3427:function(e,t,n){"use strict";n("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},n("d9e2"),n("d401")},"42ce":function(e,t,n){var i=n("ddff");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var r=n("4f06").default;r("341bd058",i,!0,{sourceMap:!1,shadowMode:!1})},"5ba2":function(e,t,n){"use strict";n.r(t);var i=n("0e99"),r=n.n(i);for(var a in i)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=r.a},6005:function(e,t,n){"use strict";n("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(Array.isArray(e))return(0,i.default)(e)};var i=function(e){return e&&e.__esModule?e:{default:e}}(n("6b75"))},"6a53":function(e,t,n){"use strict";n.r(t);var i=n("719a"),r=n("5ba2");for(var a in r)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(a);n("a0e0");var o=n("f0c5"),u=Object(o["a"])(r["default"],i["b"],i["c"],!1,null,"f53ac6e2",null,!1,i["a"],void 0);t["default"]=u.exports},"719a":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}));var i={pageMeta:n("6d42").default,uniNavBar:n("10ee").default,uniFilePicker:n("f99d").default},r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",[n("page-meta",{attrs:{"root-font-size":e.fontSize+"px"}}),n("member-base",{attrs:{show:!1}},[n("v-uni-view",{staticClass:"div member-information"},[n("v-uni-view",{staticClass:"div common-header-wrap"},[n("v-uni-view",{style:"height:"+e.navHeight+"px"}),n("v-uni-view",{staticClass:"common-header-holder"}),n("v-uni-view",{staticClass:"common-header-fixed"},[n("title-header"),n("uni-nav-bar",{staticClass:"common-header",attrs:{title:"新增退款","left-icon":"back"},on:{clickLeft:function(t){arguments[0]=t=e.$handleEvent(t),e.goBack()}}})],1)],1),n("v-uni-view",{staticClass:"div form"},[n("v-uni-view",{staticClass:"div field-line-right"},[n("v-uni-textarea",{staticClass:"order-message field-input",attrs:{placeholder:"退款说明:"},model:{value:e.buyer_message,callback:function(t){e.buyer_message=t},expression:"buyer_message"}})],1),n("flex-line",[n("v-uni-text",{staticClass:"span line-name"},[e._v("退款凭证")])],1),n("v-uni-view",{staticClass:"div image-wrapper"},[n("v-uni-view",{staticClass:"div user-avatar"},[n("uni-file-picker",{attrs:{fileMediatype:"image",mode:"grid",limit:3,"auto-upload":!1},on:{select:function(t){arguments[0]=t=e.$handleEvent(t),e.uploadRefundImage.apply(void 0,arguments)},delete:function(t){arguments[0]=t=e.$handleEvent(t),e.deleteRefundImage.apply(void 0,arguments)}},model:{value:e.image,callback:function(t){e.image=t},expression:"image"}})],1)],1),n("v-uni-view",{staticClass:"div pt-10 pb-10"},[n("v-uni-view",{staticClass:"div common-btn ds-button-large mt-10",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submitInformation.apply(void 0,arguments)}}},[e._v("保存")])],1)],1),e.cropperOption.imgUrl?n("tui-picture-cropper",{attrs:{width:e.cropperOption.autoCropWidth,height:e.cropperOption.autoCropHeight,imageUrl:e.cropperOption.img},on:{ready:function(t){arguments[0]=t=e.$handleEvent(t),e.cropReady.apply(void 0,arguments)},cropper:function(t){arguments[0]=t=e.$handleEvent(t),e.useCrop.apply(void 0,arguments)},back:function(t){arguments[0]=t=e.$handleEvent(t),e.cropBack.apply(void 0,arguments)}}}):e._e()],1)],1)],1)},a=[]},7744:function(e,t,n){"use strict";n("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.uploadRefundImage=t.getRefundList=t.getRefundInfo=t.getCommonData=t.addRefundAll=t.addRefund=void 0;var i=n("6e6d");t.getRefundList=function(e){return(0,i.requestApi)("/Memberrefund/get_refund_list","POST",{page:e.page,per_page:e.per_page},"member")};t.getRefundInfo=function(e){return(0,i.requestApi)("/Memberrefund/get_refund_info","POST",{refund_id:e},"member")};t.addRefundAll=function(e,t,n){return(0,i.requestApi)("/Memberrefund/refund_all_post","POST",{order_id:e,buyer_message:t,refund_pic:n},"member")};t.addRefund=function(e,t,n,r,a,o,u,d){return(0,i.requestApi)("/Memberrefund/refund_post","POST",{refund_type:e,order_id:t,order_goods_id:n,refund_amount:r,goods_num:a,reason_id:o,buyer_message:u,refund_pic:d},"member")};t.uploadRefundImage=function(e){return(0,i.requestApi)("/Memberrefund/upload_pic","POST",e,"member",!0)};t.getCommonData=function(e,t){return(0,i.requestApi)("/Memberrefund/refund_form","POST",{order_id:e,order_goods_id:t},"member")}},a0e0:function(e,t,n){"use strict";var i=n("42ce"),r=n.n(i);r.a},db90:function(e,t,n){"use strict";n("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("a630")},ddff:function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.common-header .btn[data-v-f53ac6e2]{background:#000;color:#fff;box-shadow:0 2px 4px #d2d2d2}.form[data-v-f53ac6e2]{background:#fff;padding:0 .6rem}.member-information[data-v-f53ac6e2]{background:#fff}.member-information .order-message[data-v-f53ac6e2]{background:#fbfbfb;margin:.5rem 0;font-size:.7rem;padding:.5rem;height:4rem;border:0;box-sizing:border-box;width:100%}',""]),e.exports=t}}]);